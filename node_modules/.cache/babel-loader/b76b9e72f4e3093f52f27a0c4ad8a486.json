{"ast":null,"code":"import { call, put, takeLatest, takeEvery } from \"@redux-saga/core/effects\";\nimport { STATUS_CODE } from \"../../../../../utils/common/constants\";\nimport { fetchMovieDetailApiAction, fetchUsersCommentApiAction, postUsersCommentApiAction } from \"../services/MovieDetailService\";\nimport { FETCH_THONG_TIN_PHIM_REQUESTS_SAGA, FETCH_THONG_TIN_PHIM_FAILED, FETCH_THONG_TIN_PHIM_REQUESTS, FETCH_THONG_TIN_PHIM_SUCCESS, FETCH_USERS_COMMENT_REQUESTED, FETCH_USERS_COMMENT_REQUESTS_SAGA, FETCH_USERS_COMMENT_SUCCESS, FETCH_USERS_COMMENT_FAILED, POST_USERS_COMMENT_REQUESTS_SAGA } from \"./constants\";\n\nfunction* fetchDetailMovieApiActionSaga({\n  maPhim\n}) {\n  yield put({\n    type: FETCH_THONG_TIN_PHIM_REQUESTS\n  });\n\n  try {\n    const {\n      data,\n      status\n    } = yield call(fetchMovieDetailApiAction, maPhim);\n\n    if (status === STATUS_CODE.SUCCESS) {\n      yield put({\n        type: FETCH_THONG_TIN_PHIM_SUCCESS,\n        payload: data\n      });\n    }\n  } catch (err) {\n    yield put({\n      type: FETCH_THONG_TIN_PHIM_FAILED,\n      payload: err.response.data\n    });\n  }\n}\n\nfunction* fetchUsersCommentApiActionSaga() {\n  yield put({\n    type: FETCH_USERS_COMMENT_REQUESTED\n  });\n\n  try {\n    const {\n      data,\n      status\n    } = yield call(fetchUsersCommentApiAction);\n\n    if (status === STATUS_CODE.SUCCESS) {\n      yield put({\n        type: FETCH_USERS_COMMENT_SUCCESS,\n        payload: data\n      });\n    }\n  } catch (err) {\n    yield put({\n      type: FETCH_USERS_COMMENT_FAILED,\n      payload: err.response.data\n    });\n  }\n}\n\nfunction* postUsersCommentApiActionSaga({\n  payload\n}) {\n  try {\n    const {\n      hoTen\n    } = JSON.parse(localStorage.getItem(\"USER\"));\n    const {\n      binhLuan,\n      rating: danhGiaFake,\n      luotThich\n    } = payload;\n    let danhGia = danhGiaFake * 2;\n    const dataComment = {\n      binhLuan,\n      danhGia,\n      luotThich,\n      hoTen\n    };\n    const {\n      data,\n      status\n    } = yield call(postUsersCommentApiAction, dataComment);\n\n    if (status === STATUS_CODE.CREATED) {\n      yield call(fetchUsersCommentApiActionSaga);\n    }\n  } catch (err) {\n    console.log(err.response.data);\n  }\n}\n\nexport const MovieDetailSagas = [takeLatest(FETCH_THONG_TIN_PHIM_REQUESTS_SAGA, fetchDetailMovieApiActionSaga), takeLatest(FETCH_USERS_COMMENT_REQUESTS_SAGA, fetchUsersCommentApiActionSaga), takeLatest(POST_USERS_COMMENT_REQUESTS_SAGA, postUsersCommentApiActionSaga)];","map":{"version":3,"sources":["C:/Users/DinhNgo/Desktop/BookingMovie/src/container/HomeTemplate/Detail/modules/redux/sagas.js"],"names":["call","put","takeLatest","takeEvery","STATUS_CODE","fetchMovieDetailApiAction","fetchUsersCommentApiAction","postUsersCommentApiAction","FETCH_THONG_TIN_PHIM_REQUESTS_SAGA","FETCH_THONG_TIN_PHIM_FAILED","FETCH_THONG_TIN_PHIM_REQUESTS","FETCH_THONG_TIN_PHIM_SUCCESS","FETCH_USERS_COMMENT_REQUESTED","FETCH_USERS_COMMENT_REQUESTS_SAGA","FETCH_USERS_COMMENT_SUCCESS","FETCH_USERS_COMMENT_FAILED","POST_USERS_COMMENT_REQUESTS_SAGA","fetchDetailMovieApiActionSaga","maPhim","type","data","status","SUCCESS","payload","err","response","fetchUsersCommentApiActionSaga","postUsersCommentApiActionSaga","hoTen","JSON","parse","localStorage","getItem","binhLuan","rating","danhGiaFake","luotThich","danhGia","dataComment","CREATED","console","log","MovieDetailSagas"],"mappings":"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","sourcesContent":["import { call, put, takeLatest, takeEvery } from \"@redux-saga/core/effects\";\nimport { STATUS_CODE } from \"../../../../../utils/common/constants\";\nimport {\n  fetchMovieDetailApiAction,\n  fetchUsersCommentApiAction,\n  postUsersCommentApiAction,\n} from \"../services/MovieDetailService\";\nimport {\n  FETCH_THONG_TIN_PHIM_REQUESTS_SAGA,\n  FETCH_THONG_TIN_PHIM_FAILED,\n  FETCH_THONG_TIN_PHIM_REQUESTS,\n  FETCH_THONG_TIN_PHIM_SUCCESS,\n  FETCH_USERS_COMMENT_REQUESTED,\n  FETCH_USERS_COMMENT_REQUESTS_SAGA,\n  FETCH_USERS_COMMENT_SUCCESS,\n  FETCH_USERS_COMMENT_FAILED,\n  POST_USERS_COMMENT_REQUESTS_SAGA,\n} from \"./constants\";\n\nfunction* fetchDetailMovieApiActionSaga({ maPhim }) {\n  yield put({\n    type: FETCH_THONG_TIN_PHIM_REQUESTS,\n  });\n  try {\n    const { data, status } = yield call(fetchMovieDetailApiAction, maPhim);\n    if (status === STATUS_CODE.SUCCESS) {\n      yield put({\n        type: FETCH_THONG_TIN_PHIM_SUCCESS,\n        payload: data,\n      });\n    }\n  } catch (err) {\n    yield put({\n      type: FETCH_THONG_TIN_PHIM_FAILED,\n      payload: err.response.data,\n    });\n  }\n}\n\nfunction* fetchUsersCommentApiActionSaga() {\n  yield put({\n    type: FETCH_USERS_COMMENT_REQUESTED,\n  });\n  try {\n    const { data, status } = yield call(fetchUsersCommentApiAction);\n    if (status === STATUS_CODE.SUCCESS) {\n      yield put({\n        type: FETCH_USERS_COMMENT_SUCCESS,\n        payload: data,\n      });\n    }\n  } catch (err) {\n    yield put({\n      type: FETCH_USERS_COMMENT_FAILED,\n      payload: err.response.data,\n    });\n  }\n}\n\nfunction* postUsersCommentApiActionSaga({ payload }) {\n  try {\n    const { hoTen } = JSON.parse(localStorage.getItem(\"USER\"));\n    const { binhLuan, rating: danhGiaFake, luotThich } = payload;\n    let danhGia = danhGiaFake * 2;\n    const dataComment = { binhLuan, danhGia, luotThich, hoTen };\n    const { data, status } = yield call(postUsersCommentApiAction, dataComment);\n    if (status === STATUS_CODE.CREATED) {\n      yield call(fetchUsersCommentApiActionSaga);\n    }\n  } catch (err) {\n    console.log(err.response.data);\n  }\n}\n\nexport const MovieDetailSagas = [\n  takeLatest(FETCH_THONG_TIN_PHIM_REQUESTS_SAGA, fetchDetailMovieApiActionSaga),\n  takeLatest(FETCH_USERS_COMMENT_REQUESTS_SAGA, fetchUsersCommentApiActionSaga),\n  takeLatest(POST_USERS_COMMENT_REQUESTS_SAGA, postUsersCommentApiActionSaga),\n];\n"]},"metadata":{},"sourceType":"module"}